作者 秃秃
该文章为学习gin-vue-admin笔记
服务端学习

项目包管理：module


首先理解一下global/global.go文件
	分别定义几个变量	数据库  redis客户端 配置的结构体 使用配置管理包 viper  调用logg接口


第一步

入口文件

main.go

initialize.Mysql 初始化数据库 
	下面查看该语句函数
		获得配置信息 （此处不知道配置从哪里加载)
		使用gorm打开数据库链接 如过无错，配置数据库信息， 设置最大链接数量，最大空闲连接数
		设置数据库日志模型 true输出默认日志， false不输出日志

initialize.DBTables 迁移数据模型，
	函数官方解释： 从给出的model自动迁移数据，近近迁移没有的数据
	打出一条日志

defer global.GVA_DB.COASE() 在函数退出时，关闭数据库连接
core.RunWindowsServer 运行服务器


第二步

开始从core 包来解析

如果配置允许多点（此处目前不了解含义） 那么初始化Redis数据库

initialize.Routers() 初始化路由 此处有大动作，此处基本上包括项目全部逻辑，在下面进行详解

从配置文件中获得服务器启动地址

设置服务器配置。内容根据字面意思就可以理解

打出日志 启动服务器地址以及端口

将服务器启动，并且传入日志的ERROR中， 此处完美演绎了go面向接口编程的特点（目前还不是充分理解）

接下来从上面的router微入口继续深入


第三补  路由


获得一个gin引擎的一个对象，此处时间是一个结构体，但是自我认为是一个对象
打出日志
使用跨域中间件  
	进入这个中间件文件内
		返回值 gin.HandlerFunc 官方解释是专门为中间件返回值
		该端代码逻辑为 获得请求方法 给请求加上跨域请求的一些header 
		如果请求方法是 OPTIONS 那么返回码204 中断请求
		否则c.next 通过该中间件，进入下面逻辑
为swagger添加路由，接下来进入gin.Swagger的处理逻辑，该段逻辑被/"github.com/swaggo/gin-swagger"这个包所封装 含义为访问该路由将会被定为到swagger的view视图中
添加一个空的路由组
按照下面逻辑依次将该路由组初始化各个view，接下来看一下各种初始化方法

初始化用户路由
	添加user路由组 可以通过/user 对该组进行访问
	第一个路由 post  v1.ChangePassword 视图
		接下来进入到视图 
			定义一个改密码的一个数据的结构体
			然后对params进行 json解析
			接下来构造一个用户的结构体 
				该结构体 可以理解为一个对象 调用该对象修改密码的函数， 接下来看一些这个函数 
					定义一个用户对象
					对该对象的密码进行列表字节转换，然后调用hash方法进行加密， 该加密方法 很简单 哈哈哈 
					紧接着更新密码， 然后返回结果和错误
	第二个路由 post v1.UploadHeaderImg 视图
		此处操作 将文件上传到七牛云返回文件地址，然后新建一个user对象实现上传头像功能， 该功能上传uuid 以及七牛云图片地址 对符合uuid的对象进项更新头像操作然后返回该user对象 如果成功就讲user对象返回到前台

	第三个路由 post v1.GetUserList 
		获得页数以及一个页大小的json对象
			获得页的大小， 获得该信息的偏移量
			获得db对象
			然后定义一个用户列表 对数据表进行遍历获得信息并进行返回, 然后对返回数据进行response
	第四个路由 post v1.SetUserAuthorith
		设置用户权限
			定义一个权限模型 并且进行json 解析
			出事一个user对象进行改变权限


